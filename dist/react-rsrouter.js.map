{"version":3,"file":"react-rsrouter.js","sources":["../src/components/contexts.ts","../node_modules/typesafe-actions/dist/index.esm.js","../src/store/actions.ts","../src/store/reducer.ts","../node_modules/@babel/runtime/helpers/esm/extends.js","../node_modules/resolve-pathname/cjs/index.js","../node_modules/value-equal/cjs/index.js","../node_modules/tiny-warning/dist/tiny-warning.cjs.js","../node_modules/tiny-invariant/dist/tiny-invariant.esm.js","../node_modules/history/esm/history.js","../src/history.ts","../src/store/selectors.ts","../src/utils/matcher.ts","../src/utils/routes.ts","../src/utils/index.ts","../src/store/saga/createApplyMatch.ts","../src/store/saga/index.ts","../src/components/Routes.tsx","../src/components/RouterProvider.tsx","../src/components/Link.tsx"],"sourcesContent":["import React from 'react'\nimport { RoutePath, RouteParams } from '..'\n\nexport interface RouteContextValues {\n  path: RoutePath\n}\n\nexport const RouteContext = React.createContext<RouteContextValues>({\n  path: [],\n})\n\nexport interface RouterProviderContextValues {\n  buildUrl: (to: RoutePath, params: RouteParams) => string\n}\n\nexport const RouterProviderContext = React.createContext<RouterProviderContextValues>({\n  buildUrl: (() => {\n    throw new Error('RouterProviderContext is not initialized')\n  }),\n})\n","import { __assign } from 'tslib';\n\nfunction checkIsEmpty(arg, argPosition) {\n    if (argPosition === void 0) { argPosition = 1; }\n    return arg == null;\n}\nfunction throwIsEmpty(argPosition) {\n    if (argPosition === void 0) { argPosition = 1; }\n    throw new Error(\"Argument \" + argPosition + \" is empty.\");\n}\nfunction checkValidActionCreator(arg) {\n    return typeof arg === 'function' && 'getType' in arg;\n}\nfunction checkInvalidActionCreator(arg) {\n    return !checkValidActionCreator(arg);\n}\nfunction throwInvalidActionCreator(argPosition) {\n    if (argPosition === void 0) { argPosition = 1; }\n    throw new Error(\"Argument \" + argPosition + \" is invalid, it should be an action-creator instance from \\\"typesafe-actions\\\"\");\n}\nfunction checkInvalidActionCreatorInArray(arg, idx) {\n    if (arg == null) {\n        throw new Error(\"Argument contains array with empty element at index \" + idx);\n    }\n    else if (arg.getType == null) {\n        throw new Error(\"Argument contains array with invalid element at index \" + idx + \", it should be an action-creator instance from \\\"typesafe-actions\\\"\");\n    }\n}\nfunction checkValidActionType(arg) {\n    return typeof arg === 'string' || typeof arg === 'symbol';\n}\nfunction checkInvalidActionType(arg) {\n    return !checkValidActionType(arg);\n}\nfunction throwInvalidActionType(argPosition) {\n    if (argPosition === void 0) { argPosition = 1; }\n    throw new Error(\"Argument \" + argPosition + \" is invalid, it should be an action type of type: string | symbol\");\n}\nfunction checkInvalidActionTypeInArray(arg, idx) {\n    if (arg == null) {\n        throw new Error(\"Argument contains array with empty element at index \" + idx);\n    }\n    else if (typeof arg !== 'string' && typeof arg !== 'symbol') {\n        throw new Error(\"Argument contains array with invalid element at index \" + idx + \", it should be of type: string | symbol\");\n    }\n}\nfunction throwInvalidActionTypeOrActionCreator(argPosition) {\n    if (argPosition === void 0) { argPosition = 1; }\n    throw new Error(\"Argument \" + argPosition + \" is invalid, it should be an action-creator instance from \\\"typesafe-actions\\\" or action type of type: string | symbol\");\n}\n\nfunction action(type, payload, meta, error) {\n    if (checkIsEmpty(type)) {\n        throwIsEmpty(1);\n    }\n    if (checkInvalidActionType(type)) {\n        throwInvalidActionCreator(1);\n    }\n    return { type: type, payload: payload, meta: meta, error: error };\n}\n\nfunction createAction(type, createHandler) {\n    var actionCreator = createHandler == null\n        ? (function () { return action(type); })\n        : createHandler(action.bind(null, type));\n    return Object.assign(actionCreator, {\n        getType: function () { return type; },\n        toString: function () { return type; },\n    });\n}\n\nfunction createCustomAction(type, createHandler) {\n    if (checkIsEmpty(type)) {\n        throwIsEmpty(1);\n    }\n    if (checkInvalidActionType(type)) {\n        throwInvalidActionType(1);\n    }\n    var actionCreator = createHandler != null ? createHandler(type) : (function () { return ({ type: type }); });\n    return Object.assign(actionCreator, {\n        getType: function () { return type; },\n        toString: function () { return type; },\n    });\n}\n\nfunction createStandardAction(type) {\n    if (checkIsEmpty(type)) {\n        throwIsEmpty(1);\n    }\n    if (checkInvalidActionType(type)) {\n        throwInvalidActionType(1);\n    }\n    function constructor() {\n        return createCustomAction(type, function (_type) { return function (payload, meta) { return ({\n            type: _type,\n            payload: payload,\n            meta: meta,\n        }); }; });\n    }\n    function map(fn) {\n        return createCustomAction(type, function (_type) { return function (payload, meta) {\n            return Object.assign(fn(payload, meta), { type: _type });\n        }; });\n    }\n    return Object.assign(constructor, { map: map });\n}\n\nfunction createAsyncAction(requestType, successType, failureType, cancelType) {\n    [requestType, successType, failureType].forEach(checkInvalidActionTypeInArray);\n    var constructor = (function () {\n        return {\n            request: createStandardAction(requestType)(),\n            success: createStandardAction(successType)(),\n            failure: createStandardAction(failureType)(),\n            cancel: cancelType && createStandardAction(cancelType)(),\n        };\n    });\n    var api = Object.assign(constructor, {});\n    return api;\n}\n\nfunction getType(actionCreator) {\n    if (checkIsEmpty(actionCreator)) {\n        throwIsEmpty(1);\n    }\n    if (checkInvalidActionCreator(actionCreator)) {\n        throwInvalidActionCreator(1);\n    }\n    return actionCreator.getType();\n}\n\nfunction createReducer(initialState, initialHandlers) {\n    if (initialHandlers === void 0) { initialHandlers = {}; }\n    var handlers = __assign({}, initialHandlers);\n    var rootReducer = function (state, action) {\n        if (state === void 0) { state = initialState; }\n        if (handlers.hasOwnProperty(action.type)) {\n            var reducer = handlers[action.type];\n            if (typeof reducer !== 'function') {\n                throw Error(\"Reducer under \\\"\" + action.type + \"\\\" key is not a valid reducer\");\n            }\n            return reducer(state, action);\n        }\n        else {\n            return state;\n        }\n    };\n    var handleAction = (function (singleOrMultipleCreatorsAndTypes, reducer) {\n        var creatorsAndTypes = Array.isArray(singleOrMultipleCreatorsAndTypes)\n            ? singleOrMultipleCreatorsAndTypes\n            : [singleOrMultipleCreatorsAndTypes];\n        var newHandlers = {};\n        creatorsAndTypes\n            .map(function (acOrType) {\n            return checkValidActionCreator(acOrType)\n                ? getType(acOrType)\n                : checkValidActionType(acOrType)\n                    ? acOrType\n                    : throwInvalidActionTypeOrActionCreator();\n        })\n            .forEach(function (type) { return (newHandlers[type] = reducer); });\n        return createReducer(initialState, __assign({}, handlers, newHandlers));\n    });\n    var chainApi = Object.assign(rootReducer, {\n        handlers: __assign({}, handlers),\n        handleAction: handleAction,\n    });\n    return chainApi;\n}\n\nfunction isOfType(actionTypeOrTypes, action) {\n    if (checkIsEmpty(actionTypeOrTypes)) {\n        throwIsEmpty(1);\n    }\n    var actionTypes = Array.isArray(actionTypeOrTypes)\n        ? actionTypeOrTypes\n        : [actionTypeOrTypes];\n    actionTypes.forEach(checkInvalidActionTypeInArray);\n    var assertFn = function (_action) { return actionTypes.includes(_action.type); };\n    if (action === undefined) {\n        return assertFn;\n    }\n    return assertFn(action);\n}\n\nfunction isActionOf(actionCreatorOrCreators, action) {\n    if (checkIsEmpty(actionCreatorOrCreators)) {\n        throwIsEmpty(1);\n    }\n    var actionCreators = Array.isArray(actionCreatorOrCreators)\n        ? actionCreatorOrCreators\n        : [actionCreatorOrCreators];\n    actionCreators.forEach(checkInvalidActionCreatorInArray);\n    var assertFn = function (_action) {\n        return actionCreators.some(function (actionCreator) { return _action.type === actionCreator.getType(); });\n    };\n    if (action === undefined) {\n        return assertFn;\n    }\n    return assertFn(action);\n}\n\nfunction createActionDeprecated(actionType, creatorFunction) {\n    var actionCreator;\n    if (creatorFunction != null) {\n        if (typeof creatorFunction !== 'function') {\n            throw new Error('second argument is not a function');\n        }\n        actionCreator = creatorFunction;\n    }\n    else {\n        actionCreator = (function () { return ({ type: actionType }); });\n    }\n    if (actionType != null) {\n        if (typeof actionType !== 'string' && typeof actionType !== 'symbol') {\n            throw new Error('first argument should be type of: string | symbol');\n        }\n    }\n    else {\n        throw new Error('first argument is missing');\n    }\n    return actionCreator;\n}\n\nexport { action, createAction, createStandardAction, createCustomAction, createAsyncAction, createReducer, getType, isOfType, isActionOf, createActionDeprecated };\n","import { createStandardAction, createAction } from 'typesafe-actions'\n\nimport { Match, RouterLocation, RouteParams, RoutePath, ServerResponse } from '../'\n\ntype goToUrlPayloadArg = { url: string; replace?: boolean }\ntype goToToRoutePayloadArg = { path: RoutePath; params?: RouteParams, replace?: boolean }\ntype goToPayloadArg = goToUrlPayloadArg | goToToRoutePayloadArg\n\ntype goToUrlPayload = { payload: { url: string; replace: boolean } }\ntype goToToRoutePayload = { payload: { path: RoutePath; params: RouteParams, replace: boolean } }\ntype goToPayload = goToUrlPayload | goToToRoutePayload\n\nexport const goTo = createStandardAction<string>('@rs_router/GO_TO')\n  .map(({ replace = false, ...payload }: goToPayloadArg): goToPayload => {\n    if ('url' in payload) {\n      return { payload: { ...payload, replace } }\n    }\n    const { path, params } = payload\n    return { payload: { path, replace, params: params || {}  } }\n  })\n\nexport const setMatch = createStandardAction<string>('@rs_router/MATCH_SET')\n  .map((payload: Match) => ({ payload }))\n\nexport const setLocation = createStandardAction<string>('@rs_router/LOCATION_SET')\n  .map((payload: RouterLocation) => ({ payload }))\n\nexport const notFound = createAction('@rs_router/NOT_FOUND')\n\nexport const goBack = createAction('@rs_router/GO_BACK')\n\nexport const setServerResponse = createStandardAction<string>('@rs_router/SERVER_RESPONSE_SET')\n  .map((payload: ServerResponse) => ({ payload }))\n","import { StateType, ActionType, getType } from 'typesafe-actions'\nimport { Store } from 'redux'\n\nimport * as actions from './actions'\nimport { RouteParams } from '../index'\n\nexport type RootAction = ActionType<typeof actions>\nexport type RootState = { router: StateType<typeof routerReducer> }\nexport type RootStore = Store<RootState>\nexport type stateGetter = () => RootState\n\nconst initialState = {\n  match: { path: [], params: {} as RouteParams },\n  serverResponse: { status: 200 },\n  location: null,\n}\n\nexport default function routerReducer(state = initialState, action: RootAction) {\n  switch (action.type) {\n    case getType(actions.setMatch):\n      return {\n        ...state,\n        match: {\n          ...(action as ActionType<typeof actions.setMatch>).payload,\n        },\n      }\n    case getType(actions.setServerResponse):\n      return {\n        ...state,\n        serverResponse: {\n          ...(action as ActionType<typeof actions.setServerResponse>).payload,\n        },\n      }\n    case getType(actions.setLocation):\n      return {\n        ...state,\n        location: (action as ActionType<typeof actions.setLocation>).payload,\n      }\n    default:\n      return state\n  }\n}\n","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","'use strict';\n\nexports.__esModule = true;\nfunction isAbsolute(pathname) {\n  return pathname.charAt(0) === '/';\n}\n\n// About 1.5x faster than the two-arg version of Array#splice()\nfunction spliceOne(list, index) {\n  for (var i = index, k = i + 1, n = list.length; k < n; i += 1, k += 1) {\n    list[i] = list[k];\n  }\n\n  list.pop();\n}\n\n// This implementation is based heavily on node's url.parse\nfunction resolvePathname(to) {\n  var from = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n\n  var toParts = to && to.split('/') || [];\n  var fromParts = from && from.split('/') || [];\n\n  var isToAbs = to && isAbsolute(to);\n  var isFromAbs = from && isAbsolute(from);\n  var mustEndAbs = isToAbs || isFromAbs;\n\n  if (to && isAbsolute(to)) {\n    // to is absolute\n    fromParts = toParts;\n  } else if (toParts.length) {\n    // to is relative, drop the filename\n    fromParts.pop();\n    fromParts = fromParts.concat(toParts);\n  }\n\n  if (!fromParts.length) return '/';\n\n  var hasTrailingSlash = void 0;\n  if (fromParts.length) {\n    var last = fromParts[fromParts.length - 1];\n    hasTrailingSlash = last === '.' || last === '..' || last === '';\n  } else {\n    hasTrailingSlash = false;\n  }\n\n  var up = 0;\n  for (var i = fromParts.length; i >= 0; i--) {\n    var part = fromParts[i];\n\n    if (part === '.') {\n      spliceOne(fromParts, i);\n    } else if (part === '..') {\n      spliceOne(fromParts, i);\n      up++;\n    } else if (up) {\n      spliceOne(fromParts, i);\n      up--;\n    }\n  }\n\n  if (!mustEndAbs) for (; up--; up) {\n    fromParts.unshift('..');\n  }if (mustEndAbs && fromParts[0] !== '' && (!fromParts[0] || !isAbsolute(fromParts[0]))) fromParts.unshift('');\n\n  var result = fromParts.join('/');\n\n  if (hasTrailingSlash && result.substr(-1) !== '/') result += '/';\n\n  return result;\n}\n\nexports.default = resolvePathname;\nmodule.exports = exports['default'];","'use strict';\n\nexports.__esModule = true;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nfunction valueEqual(a, b) {\n  if (a === b) return true;\n\n  if (a == null || b == null) return false;\n\n  if (Array.isArray(a)) {\n    return Array.isArray(b) && a.length === b.length && a.every(function (item, index) {\n      return valueEqual(item, b[index]);\n    });\n  }\n\n  var aType = typeof a === 'undefined' ? 'undefined' : _typeof(a);\n  var bType = typeof b === 'undefined' ? 'undefined' : _typeof(b);\n\n  if (aType !== bType) return false;\n\n  if (aType === 'object') {\n    var aValue = a.valueOf();\n    var bValue = b.valueOf();\n\n    if (aValue !== a || bValue !== b) return valueEqual(aValue, bValue);\n\n    var aKeys = Object.keys(a);\n    var bKeys = Object.keys(b);\n\n    if (aKeys.length !== bKeys.length) return false;\n\n    return aKeys.every(function (key) {\n      return valueEqual(a[key], b[key]);\n    });\n  }\n\n  return false;\n}\n\nexports.default = valueEqual;\nmodule.exports = exports['default'];","'use strict';\n\nvar isProduction = process.env.NODE_ENV === 'production';\nfunction warning(condition, message) {\n  if (!isProduction) {\n    if (condition) {\n      return;\n    }\n\n    var text = \"Warning: \" + message;\n\n    if (typeof console !== 'undefined') {\n      console.warn(text);\n    }\n\n    try {\n      throw Error(text);\n    } catch (x) {}\n  }\n}\n\nmodule.exports = warning;\n","var isProduction = process.env.NODE_ENV === 'production';\nvar prefix = 'Invariant failed';\nfunction invariant(condition, message) {\n  if (condition) {\n    return;\n  }\n\n  if (isProduction) {\n    throw new Error(prefix);\n  } else {\n    throw new Error(prefix + \": \" + (message || ''));\n  }\n}\n\nexport default invariant;\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport resolvePathname from 'resolve-pathname';\nimport valueEqual from 'value-equal';\nimport warning from 'tiny-warning';\nimport invariant from 'tiny-invariant';\n\nfunction addLeadingSlash(path) {\n  return path.charAt(0) === '/' ? path : '/' + path;\n}\nfunction stripLeadingSlash(path) {\n  return path.charAt(0) === '/' ? path.substr(1) : path;\n}\nfunction hasBasename(path, prefix) {\n  return new RegExp('^' + prefix + '(\\\\/|\\\\?|#|$)', 'i').test(path);\n}\nfunction stripBasename(path, prefix) {\n  return hasBasename(path, prefix) ? path.substr(prefix.length) : path;\n}\nfunction stripTrailingSlash(path) {\n  return path.charAt(path.length - 1) === '/' ? path.slice(0, -1) : path;\n}\nfunction parsePath(path) {\n  var pathname = path || '/';\n  var search = '';\n  var hash = '';\n  var hashIndex = pathname.indexOf('#');\n\n  if (hashIndex !== -1) {\n    hash = pathname.substr(hashIndex);\n    pathname = pathname.substr(0, hashIndex);\n  }\n\n  var searchIndex = pathname.indexOf('?');\n\n  if (searchIndex !== -1) {\n    search = pathname.substr(searchIndex);\n    pathname = pathname.substr(0, searchIndex);\n  }\n\n  return {\n    pathname: pathname,\n    search: search === '?' ? '' : search,\n    hash: hash === '#' ? '' : hash\n  };\n}\nfunction createPath(location) {\n  var pathname = location.pathname,\n      search = location.search,\n      hash = location.hash;\n  var path = pathname || '/';\n  if (search && search !== '?') path += search.charAt(0) === '?' ? search : \"?\" + search;\n  if (hash && hash !== '#') path += hash.charAt(0) === '#' ? hash : \"#\" + hash;\n  return path;\n}\n\nfunction createLocation(path, state, key, currentLocation) {\n  var location;\n\n  if (typeof path === 'string') {\n    // Two-arg form: push(path, state)\n    location = parsePath(path);\n    location.state = state;\n  } else {\n    // One-arg form: push(location)\n    location = _extends({}, path);\n    if (location.pathname === undefined) location.pathname = '';\n\n    if (location.search) {\n      if (location.search.charAt(0) !== '?') location.search = '?' + location.search;\n    } else {\n      location.search = '';\n    }\n\n    if (location.hash) {\n      if (location.hash.charAt(0) !== '#') location.hash = '#' + location.hash;\n    } else {\n      location.hash = '';\n    }\n\n    if (state !== undefined && location.state === undefined) location.state = state;\n  }\n\n  try {\n    location.pathname = decodeURI(location.pathname);\n  } catch (e) {\n    if (e instanceof URIError) {\n      throw new URIError('Pathname \"' + location.pathname + '\" could not be decoded. ' + 'This is likely caused by an invalid percent-encoding.');\n    } else {\n      throw e;\n    }\n  }\n\n  if (key) location.key = key;\n\n  if (currentLocation) {\n    // Resolve incomplete/relative pathname relative to current location.\n    if (!location.pathname) {\n      location.pathname = currentLocation.pathname;\n    } else if (location.pathname.charAt(0) !== '/') {\n      location.pathname = resolvePathname(location.pathname, currentLocation.pathname);\n    }\n  } else {\n    // When there is no prior location and pathname is empty, set it to /\n    if (!location.pathname) {\n      location.pathname = '/';\n    }\n  }\n\n  return location;\n}\nfunction locationsAreEqual(a, b) {\n  return a.pathname === b.pathname && a.search === b.search && a.hash === b.hash && a.key === b.key && valueEqual(a.state, b.state);\n}\n\nfunction createTransitionManager() {\n  var prompt = null;\n\n  function setPrompt(nextPrompt) {\n    process.env.NODE_ENV !== \"production\" ? warning(prompt == null, 'A history supports only one prompt at a time') : void 0;\n    prompt = nextPrompt;\n    return function () {\n      if (prompt === nextPrompt) prompt = null;\n    };\n  }\n\n  function confirmTransitionTo(location, action, getUserConfirmation, callback) {\n    // TODO: If another transition starts while we're still confirming\n    // the previous one, we may end up in a weird state. Figure out the\n    // best way to handle this.\n    if (prompt != null) {\n      var result = typeof prompt === 'function' ? prompt(location, action) : prompt;\n\n      if (typeof result === 'string') {\n        if (typeof getUserConfirmation === 'function') {\n          getUserConfirmation(result, callback);\n        } else {\n          process.env.NODE_ENV !== \"production\" ? warning(false, 'A history needs a getUserConfirmation function in order to use a prompt message') : void 0;\n          callback(true);\n        }\n      } else {\n        // Return false from a transition hook to cancel the transition.\n        callback(result !== false);\n      }\n    } else {\n      callback(true);\n    }\n  }\n\n  var listeners = [];\n\n  function appendListener(fn) {\n    var isActive = true;\n\n    function listener() {\n      if (isActive) fn.apply(void 0, arguments);\n    }\n\n    listeners.push(listener);\n    return function () {\n      isActive = false;\n      listeners = listeners.filter(function (item) {\n        return item !== listener;\n      });\n    };\n  }\n\n  function notifyListeners() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    listeners.forEach(function (listener) {\n      return listener.apply(void 0, args);\n    });\n  }\n\n  return {\n    setPrompt: setPrompt,\n    confirmTransitionTo: confirmTransitionTo,\n    appendListener: appendListener,\n    notifyListeners: notifyListeners\n  };\n}\n\nvar canUseDOM = !!(typeof window !== 'undefined' && window.document && window.document.createElement);\nfunction getConfirmation(message, callback) {\n  callback(window.confirm(message)); // eslint-disable-line no-alert\n}\n/**\n * Returns true if the HTML5 history API is supported. Taken from Modernizr.\n *\n * https://github.com/Modernizr/Modernizr/blob/master/LICENSE\n * https://github.com/Modernizr/Modernizr/blob/master/feature-detects/history.js\n * changed to avoid false negatives for Windows Phones: https://github.com/reactjs/react-router/issues/586\n */\n\nfunction supportsHistory() {\n  var ua = window.navigator.userAgent;\n  if ((ua.indexOf('Android 2.') !== -1 || ua.indexOf('Android 4.0') !== -1) && ua.indexOf('Mobile Safari') !== -1 && ua.indexOf('Chrome') === -1 && ua.indexOf('Windows Phone') === -1) return false;\n  return window.history && 'pushState' in window.history;\n}\n/**\n * Returns true if browser fires popstate on hash change.\n * IE10 and IE11 do not.\n */\n\nfunction supportsPopStateOnHashChange() {\n  return window.navigator.userAgent.indexOf('Trident') === -1;\n}\n/**\n * Returns false if using go(n) with hash history causes a full page reload.\n */\n\nfunction supportsGoWithoutReloadUsingHash() {\n  return window.navigator.userAgent.indexOf('Firefox') === -1;\n}\n/**\n * Returns true if a given popstate event is an extraneous WebKit event.\n * Accounts for the fact that Chrome on iOS fires real popstate events\n * containing undefined state when pressing the back button.\n */\n\nfunction isExtraneousPopstateEvent(event) {\n  event.state === undefined && navigator.userAgent.indexOf('CriOS') === -1;\n}\n\nvar PopStateEvent = 'popstate';\nvar HashChangeEvent = 'hashchange';\n\nfunction getHistoryState() {\n  try {\n    return window.history.state || {};\n  } catch (e) {\n    // IE 11 sometimes throws when accessing window.history.state\n    // See https://github.com/ReactTraining/history/pull/289\n    return {};\n  }\n}\n/**\n * Creates a history object that uses the HTML5 history API including\n * pushState, replaceState, and the popstate event.\n */\n\n\nfunction createBrowserHistory(props) {\n  if (props === void 0) {\n    props = {};\n  }\n\n  !canUseDOM ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Browser history needs a DOM') : invariant(false) : void 0;\n  var globalHistory = window.history;\n  var canUseHistory = supportsHistory();\n  var needsHashChangeListener = !supportsPopStateOnHashChange();\n  var _props = props,\n      _props$forceRefresh = _props.forceRefresh,\n      forceRefresh = _props$forceRefresh === void 0 ? false : _props$forceRefresh,\n      _props$getUserConfirm = _props.getUserConfirmation,\n      getUserConfirmation = _props$getUserConfirm === void 0 ? getConfirmation : _props$getUserConfirm,\n      _props$keyLength = _props.keyLength,\n      keyLength = _props$keyLength === void 0 ? 6 : _props$keyLength;\n  var basename = props.basename ? stripTrailingSlash(addLeadingSlash(props.basename)) : '';\n\n  function getDOMLocation(historyState) {\n    var _ref = historyState || {},\n        key = _ref.key,\n        state = _ref.state;\n\n    var _window$location = window.location,\n        pathname = _window$location.pathname,\n        search = _window$location.search,\n        hash = _window$location.hash;\n    var path = pathname + search + hash;\n    process.env.NODE_ENV !== \"production\" ? warning(!basename || hasBasename(path, basename), 'You are attempting to use a basename on a page whose URL path does not begin ' + 'with the basename. Expected path \"' + path + '\" to begin with \"' + basename + '\".') : void 0;\n    if (basename) path = stripBasename(path, basename);\n    return createLocation(path, state, key);\n  }\n\n  function createKey() {\n    return Math.random().toString(36).substr(2, keyLength);\n  }\n\n  var transitionManager = createTransitionManager();\n\n  function setState(nextState) {\n    _extends(history, nextState);\n\n    history.length = globalHistory.length;\n    transitionManager.notifyListeners(history.location, history.action);\n  }\n\n  function handlePopState(event) {\n    // Ignore extraneous popstate events in WebKit.\n    if (isExtraneousPopstateEvent(event)) return;\n    handlePop(getDOMLocation(event.state));\n  }\n\n  function handleHashChange() {\n    handlePop(getDOMLocation(getHistoryState()));\n  }\n\n  var forceNextPop = false;\n\n  function handlePop(location) {\n    if (forceNextPop) {\n      forceNextPop = false;\n      setState();\n    } else {\n      var action = 'POP';\n      transitionManager.confirmTransitionTo(location, action, getUserConfirmation, function (ok) {\n        if (ok) {\n          setState({\n            action: action,\n            location: location\n          });\n        } else {\n          revertPop(location);\n        }\n      });\n    }\n  }\n\n  function revertPop(fromLocation) {\n    var toLocation = history.location; // TODO: We could probably make this more reliable by\n    // keeping a list of keys we've seen in sessionStorage.\n    // Instead, we just default to 0 for keys we don't know.\n\n    var toIndex = allKeys.indexOf(toLocation.key);\n    if (toIndex === -1) toIndex = 0;\n    var fromIndex = allKeys.indexOf(fromLocation.key);\n    if (fromIndex === -1) fromIndex = 0;\n    var delta = toIndex - fromIndex;\n\n    if (delta) {\n      forceNextPop = true;\n      go(delta);\n    }\n  }\n\n  var initialLocation = getDOMLocation(getHistoryState());\n  var allKeys = [initialLocation.key]; // Public interface\n\n  function createHref(location) {\n    return basename + createPath(location);\n  }\n\n  function push(path, state) {\n    process.env.NODE_ENV !== \"production\" ? warning(!(typeof path === 'object' && path.state !== undefined && state !== undefined), 'You should avoid providing a 2nd state argument to push when the 1st ' + 'argument is a location-like object that already has state; it is ignored') : void 0;\n    var action = 'PUSH';\n    var location = createLocation(path, state, createKey(), history.location);\n    transitionManager.confirmTransitionTo(location, action, getUserConfirmation, function (ok) {\n      if (!ok) return;\n      var href = createHref(location);\n      var key = location.key,\n          state = location.state;\n\n      if (canUseHistory) {\n        globalHistory.pushState({\n          key: key,\n          state: state\n        }, null, href);\n\n        if (forceRefresh) {\n          window.location.href = href;\n        } else {\n          var prevIndex = allKeys.indexOf(history.location.key);\n          var nextKeys = allKeys.slice(0, prevIndex === -1 ? 0 : prevIndex + 1);\n          nextKeys.push(location.key);\n          allKeys = nextKeys;\n          setState({\n            action: action,\n            location: location\n          });\n        }\n      } else {\n        process.env.NODE_ENV !== \"production\" ? warning(state === undefined, 'Browser history cannot push state in browsers that do not support HTML5 history') : void 0;\n        window.location.href = href;\n      }\n    });\n  }\n\n  function replace(path, state) {\n    process.env.NODE_ENV !== \"production\" ? warning(!(typeof path === 'object' && path.state !== undefined && state !== undefined), 'You should avoid providing a 2nd state argument to replace when the 1st ' + 'argument is a location-like object that already has state; it is ignored') : void 0;\n    var action = 'REPLACE';\n    var location = createLocation(path, state, createKey(), history.location);\n    transitionManager.confirmTransitionTo(location, action, getUserConfirmation, function (ok) {\n      if (!ok) return;\n      var href = createHref(location);\n      var key = location.key,\n          state = location.state;\n\n      if (canUseHistory) {\n        globalHistory.replaceState({\n          key: key,\n          state: state\n        }, null, href);\n\n        if (forceRefresh) {\n          window.location.replace(href);\n        } else {\n          var prevIndex = allKeys.indexOf(history.location.key);\n          if (prevIndex !== -1) allKeys[prevIndex] = location.key;\n          setState({\n            action: action,\n            location: location\n          });\n        }\n      } else {\n        process.env.NODE_ENV !== \"production\" ? warning(state === undefined, 'Browser history cannot replace state in browsers that do not support HTML5 history') : void 0;\n        window.location.replace(href);\n      }\n    });\n  }\n\n  function go(n) {\n    globalHistory.go(n);\n  }\n\n  function goBack() {\n    go(-1);\n  }\n\n  function goForward() {\n    go(1);\n  }\n\n  var listenerCount = 0;\n\n  function checkDOMListeners(delta) {\n    listenerCount += delta;\n\n    if (listenerCount === 1 && delta === 1) {\n      window.addEventListener(PopStateEvent, handlePopState);\n      if (needsHashChangeListener) window.addEventListener(HashChangeEvent, handleHashChange);\n    } else if (listenerCount === 0) {\n      window.removeEventListener(PopStateEvent, handlePopState);\n      if (needsHashChangeListener) window.removeEventListener(HashChangeEvent, handleHashChange);\n    }\n  }\n\n  var isBlocked = false;\n\n  function block(prompt) {\n    if (prompt === void 0) {\n      prompt = false;\n    }\n\n    var unblock = transitionManager.setPrompt(prompt);\n\n    if (!isBlocked) {\n      checkDOMListeners(1);\n      isBlocked = true;\n    }\n\n    return function () {\n      if (isBlocked) {\n        isBlocked = false;\n        checkDOMListeners(-1);\n      }\n\n      return unblock();\n    };\n  }\n\n  function listen(listener) {\n    var unlisten = transitionManager.appendListener(listener);\n    checkDOMListeners(1);\n    return function () {\n      checkDOMListeners(-1);\n      unlisten();\n    };\n  }\n\n  var history = {\n    length: globalHistory.length,\n    action: 'POP',\n    location: initialLocation,\n    createHref: createHref,\n    push: push,\n    replace: replace,\n    go: go,\n    goBack: goBack,\n    goForward: goForward,\n    block: block,\n    listen: listen\n  };\n  return history;\n}\n\nvar HashChangeEvent$1 = 'hashchange';\nvar HashPathCoders = {\n  hashbang: {\n    encodePath: function encodePath(path) {\n      return path.charAt(0) === '!' ? path : '!/' + stripLeadingSlash(path);\n    },\n    decodePath: function decodePath(path) {\n      return path.charAt(0) === '!' ? path.substr(1) : path;\n    }\n  },\n  noslash: {\n    encodePath: stripLeadingSlash,\n    decodePath: addLeadingSlash\n  },\n  slash: {\n    encodePath: addLeadingSlash,\n    decodePath: addLeadingSlash\n  }\n};\n\nfunction getHashPath() {\n  // We can't use window.location.hash here because it's not\n  // consistent across browsers - Firefox will pre-decode it!\n  var href = window.location.href;\n  var hashIndex = href.indexOf('#');\n  return hashIndex === -1 ? '' : href.substring(hashIndex + 1);\n}\n\nfunction pushHashPath(path) {\n  window.location.hash = path;\n}\n\nfunction replaceHashPath(path) {\n  var hashIndex = window.location.href.indexOf('#');\n  window.location.replace(window.location.href.slice(0, hashIndex >= 0 ? hashIndex : 0) + '#' + path);\n}\n\nfunction createHashHistory(props) {\n  if (props === void 0) {\n    props = {};\n  }\n\n  !canUseDOM ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Hash history needs a DOM') : invariant(false) : void 0;\n  var globalHistory = window.history;\n  var canGoWithoutReload = supportsGoWithoutReloadUsingHash();\n  var _props = props,\n      _props$getUserConfirm = _props.getUserConfirmation,\n      getUserConfirmation = _props$getUserConfirm === void 0 ? getConfirmation : _props$getUserConfirm,\n      _props$hashType = _props.hashType,\n      hashType = _props$hashType === void 0 ? 'slash' : _props$hashType;\n  var basename = props.basename ? stripTrailingSlash(addLeadingSlash(props.basename)) : '';\n  var _HashPathCoders$hashT = HashPathCoders[hashType],\n      encodePath = _HashPathCoders$hashT.encodePath,\n      decodePath = _HashPathCoders$hashT.decodePath;\n\n  function getDOMLocation() {\n    var path = decodePath(getHashPath());\n    process.env.NODE_ENV !== \"production\" ? warning(!basename || hasBasename(path, basename), 'You are attempting to use a basename on a page whose URL path does not begin ' + 'with the basename. Expected path \"' + path + '\" to begin with \"' + basename + '\".') : void 0;\n    if (basename) path = stripBasename(path, basename);\n    return createLocation(path);\n  }\n\n  var transitionManager = createTransitionManager();\n\n  function setState(nextState) {\n    _extends(history, nextState);\n\n    history.length = globalHistory.length;\n    transitionManager.notifyListeners(history.location, history.action);\n  }\n\n  var forceNextPop = false;\n  var ignorePath = null;\n\n  function handleHashChange() {\n    var path = getHashPath();\n    var encodedPath = encodePath(path);\n\n    if (path !== encodedPath) {\n      // Ensure we always have a properly-encoded hash.\n      replaceHashPath(encodedPath);\n    } else {\n      var location = getDOMLocation();\n      var prevLocation = history.location;\n      if (!forceNextPop && locationsAreEqual(prevLocation, location)) return; // A hashchange doesn't always == location change.\n\n      if (ignorePath === createPath(location)) return; // Ignore this change; we already setState in push/replace.\n\n      ignorePath = null;\n      handlePop(location);\n    }\n  }\n\n  function handlePop(location) {\n    if (forceNextPop) {\n      forceNextPop = false;\n      setState();\n    } else {\n      var action = 'POP';\n      transitionManager.confirmTransitionTo(location, action, getUserConfirmation, function (ok) {\n        if (ok) {\n          setState({\n            action: action,\n            location: location\n          });\n        } else {\n          revertPop(location);\n        }\n      });\n    }\n  }\n\n  function revertPop(fromLocation) {\n    var toLocation = history.location; // TODO: We could probably make this more reliable by\n    // keeping a list of paths we've seen in sessionStorage.\n    // Instead, we just default to 0 for paths we don't know.\n\n    var toIndex = allPaths.lastIndexOf(createPath(toLocation));\n    if (toIndex === -1) toIndex = 0;\n    var fromIndex = allPaths.lastIndexOf(createPath(fromLocation));\n    if (fromIndex === -1) fromIndex = 0;\n    var delta = toIndex - fromIndex;\n\n    if (delta) {\n      forceNextPop = true;\n      go(delta);\n    }\n  } // Ensure the hash is encoded properly before doing anything else.\n\n\n  var path = getHashPath();\n  var encodedPath = encodePath(path);\n  if (path !== encodedPath) replaceHashPath(encodedPath);\n  var initialLocation = getDOMLocation();\n  var allPaths = [createPath(initialLocation)]; // Public interface\n\n  function createHref(location) {\n    return '#' + encodePath(basename + createPath(location));\n  }\n\n  function push(path, state) {\n    process.env.NODE_ENV !== \"production\" ? warning(state === undefined, 'Hash history cannot push state; it is ignored') : void 0;\n    var action = 'PUSH';\n    var location = createLocation(path, undefined, undefined, history.location);\n    transitionManager.confirmTransitionTo(location, action, getUserConfirmation, function (ok) {\n      if (!ok) return;\n      var path = createPath(location);\n      var encodedPath = encodePath(basename + path);\n      var hashChanged = getHashPath() !== encodedPath;\n\n      if (hashChanged) {\n        // We cannot tell if a hashchange was caused by a PUSH, so we'd\n        // rather setState here and ignore the hashchange. The caveat here\n        // is that other hash histories in the page will consider it a POP.\n        ignorePath = path;\n        pushHashPath(encodedPath);\n        var prevIndex = allPaths.lastIndexOf(createPath(history.location));\n        var nextPaths = allPaths.slice(0, prevIndex === -1 ? 0 : prevIndex + 1);\n        nextPaths.push(path);\n        allPaths = nextPaths;\n        setState({\n          action: action,\n          location: location\n        });\n      } else {\n        process.env.NODE_ENV !== \"production\" ? warning(false, 'Hash history cannot PUSH the same path; a new entry will not be added to the history stack') : void 0;\n        setState();\n      }\n    });\n  }\n\n  function replace(path, state) {\n    process.env.NODE_ENV !== \"production\" ? warning(state === undefined, 'Hash history cannot replace state; it is ignored') : void 0;\n    var action = 'REPLACE';\n    var location = createLocation(path, undefined, undefined, history.location);\n    transitionManager.confirmTransitionTo(location, action, getUserConfirmation, function (ok) {\n      if (!ok) return;\n      var path = createPath(location);\n      var encodedPath = encodePath(basename + path);\n      var hashChanged = getHashPath() !== encodedPath;\n\n      if (hashChanged) {\n        // We cannot tell if a hashchange was caused by a REPLACE, so we'd\n        // rather setState here and ignore the hashchange. The caveat here\n        // is that other hash histories in the page will consider it a POP.\n        ignorePath = path;\n        replaceHashPath(encodedPath);\n      }\n\n      var prevIndex = allPaths.indexOf(createPath(history.location));\n      if (prevIndex !== -1) allPaths[prevIndex] = path;\n      setState({\n        action: action,\n        location: location\n      });\n    });\n  }\n\n  function go(n) {\n    process.env.NODE_ENV !== \"production\" ? warning(canGoWithoutReload, 'Hash history go(n) causes a full page reload in this browser') : void 0;\n    globalHistory.go(n);\n  }\n\n  function goBack() {\n    go(-1);\n  }\n\n  function goForward() {\n    go(1);\n  }\n\n  var listenerCount = 0;\n\n  function checkDOMListeners(delta) {\n    listenerCount += delta;\n\n    if (listenerCount === 1 && delta === 1) {\n      window.addEventListener(HashChangeEvent$1, handleHashChange);\n    } else if (listenerCount === 0) {\n      window.removeEventListener(HashChangeEvent$1, handleHashChange);\n    }\n  }\n\n  var isBlocked = false;\n\n  function block(prompt) {\n    if (prompt === void 0) {\n      prompt = false;\n    }\n\n    var unblock = transitionManager.setPrompt(prompt);\n\n    if (!isBlocked) {\n      checkDOMListeners(1);\n      isBlocked = true;\n    }\n\n    return function () {\n      if (isBlocked) {\n        isBlocked = false;\n        checkDOMListeners(-1);\n      }\n\n      return unblock();\n    };\n  }\n\n  function listen(listener) {\n    var unlisten = transitionManager.appendListener(listener);\n    checkDOMListeners(1);\n    return function () {\n      checkDOMListeners(-1);\n      unlisten();\n    };\n  }\n\n  var history = {\n    length: globalHistory.length,\n    action: 'POP',\n    location: initialLocation,\n    createHref: createHref,\n    push: push,\n    replace: replace,\n    go: go,\n    goBack: goBack,\n    goForward: goForward,\n    block: block,\n    listen: listen\n  };\n  return history;\n}\n\nfunction clamp(n, lowerBound, upperBound) {\n  return Math.min(Math.max(n, lowerBound), upperBound);\n}\n/**\n * Creates a history object that stores locations in memory.\n */\n\n\nfunction createMemoryHistory(props) {\n  if (props === void 0) {\n    props = {};\n  }\n\n  var _props = props,\n      getUserConfirmation = _props.getUserConfirmation,\n      _props$initialEntries = _props.initialEntries,\n      initialEntries = _props$initialEntries === void 0 ? ['/'] : _props$initialEntries,\n      _props$initialIndex = _props.initialIndex,\n      initialIndex = _props$initialIndex === void 0 ? 0 : _props$initialIndex,\n      _props$keyLength = _props.keyLength,\n      keyLength = _props$keyLength === void 0 ? 6 : _props$keyLength;\n  var transitionManager = createTransitionManager();\n\n  function setState(nextState) {\n    _extends(history, nextState);\n\n    history.length = history.entries.length;\n    transitionManager.notifyListeners(history.location, history.action);\n  }\n\n  function createKey() {\n    return Math.random().toString(36).substr(2, keyLength);\n  }\n\n  var index = clamp(initialIndex, 0, initialEntries.length - 1);\n  var entries = initialEntries.map(function (entry) {\n    return typeof entry === 'string' ? createLocation(entry, undefined, createKey()) : createLocation(entry, undefined, entry.key || createKey());\n  }); // Public interface\n\n  var createHref = createPath;\n\n  function push(path, state) {\n    process.env.NODE_ENV !== \"production\" ? warning(!(typeof path === 'object' && path.state !== undefined && state !== undefined), 'You should avoid providing a 2nd state argument to push when the 1st ' + 'argument is a location-like object that already has state; it is ignored') : void 0;\n    var action = 'PUSH';\n    var location = createLocation(path, state, createKey(), history.location);\n    transitionManager.confirmTransitionTo(location, action, getUserConfirmation, function (ok) {\n      if (!ok) return;\n      var prevIndex = history.index;\n      var nextIndex = prevIndex + 1;\n      var nextEntries = history.entries.slice(0);\n\n      if (nextEntries.length > nextIndex) {\n        nextEntries.splice(nextIndex, nextEntries.length - nextIndex, location);\n      } else {\n        nextEntries.push(location);\n      }\n\n      setState({\n        action: action,\n        location: location,\n        index: nextIndex,\n        entries: nextEntries\n      });\n    });\n  }\n\n  function replace(path, state) {\n    process.env.NODE_ENV !== \"production\" ? warning(!(typeof path === 'object' && path.state !== undefined && state !== undefined), 'You should avoid providing a 2nd state argument to replace when the 1st ' + 'argument is a location-like object that already has state; it is ignored') : void 0;\n    var action = 'REPLACE';\n    var location = createLocation(path, state, createKey(), history.location);\n    transitionManager.confirmTransitionTo(location, action, getUserConfirmation, function (ok) {\n      if (!ok) return;\n      history.entries[history.index] = location;\n      setState({\n        action: action,\n        location: location\n      });\n    });\n  }\n\n  function go(n) {\n    var nextIndex = clamp(history.index + n, 0, history.entries.length - 1);\n    var action = 'POP';\n    var location = history.entries[nextIndex];\n    transitionManager.confirmTransitionTo(location, action, getUserConfirmation, function (ok) {\n      if (ok) {\n        setState({\n          action: action,\n          location: location,\n          index: nextIndex\n        });\n      } else {\n        // Mimic the behavior of DOM histories by\n        // causing a render after a cancelled POP.\n        setState();\n      }\n    });\n  }\n\n  function goBack() {\n    go(-1);\n  }\n\n  function goForward() {\n    go(1);\n  }\n\n  function canGo(n) {\n    var nextIndex = history.index + n;\n    return nextIndex >= 0 && nextIndex < history.entries.length;\n  }\n\n  function block(prompt) {\n    if (prompt === void 0) {\n      prompt = false;\n    }\n\n    return transitionManager.setPrompt(prompt);\n  }\n\n  function listen(listener) {\n    return transitionManager.appendListener(listener);\n  }\n\n  var history = {\n    length: entries.length,\n    action: 'POP',\n    location: entries[index],\n    index: index,\n    entries: entries,\n    createHref: createHref,\n    push: push,\n    replace: replace,\n    go: go,\n    goBack: goBack,\n    goForward: goForward,\n    canGo: canGo,\n    block: block,\n    listen: listen\n  };\n  return history;\n}\n\nexport { createBrowserHistory, createHashHistory, createMemoryHistory, createLocation, locationsAreEqual, parsePath, createPath };\n","import { createBrowserHistory, History } from 'history'\n\nexport interface RouterHistory extends History {\n  back: () => void\n}\n\nlet history: RouterHistory | null = null\n\nif (typeof window === 'object') {\n  history = createBrowserHistory() as RouterHistory\n}\n\nexport default history\n","import { RootState } from './reducer'\nimport { Match, RoutePath, RouterLocation, ServerResponse } from '../.'\n\nexport const getServerResponse = (state: RootState): ServerResponse => state.router.serverResponse\nexport const getMatch = (state: RootState): Match => state.router.match\nexport const getMatchPath = (state: RootState): RoutePath => state.router.match.path\nexport const getLocation = (state: RootState): RouterLocation | null => state.router.location\n\nexport const getParams = (state: RootState, paramName?: string): any => {\n  const params = state.router.match.params\n  if (paramName) {\n    return params[paramName]\n  }\n  return params\n}\n","import { Match, RouteParams, RouterLocation } from '..'\nimport { RouteSchema } from './routes'\n\nexport interface MatcherContext {\n  getState: () => object\n  match: Match\n}\n\nexport type LocationFullMatch = { params?: RouteParams; nextLocation: null }\nexport type LocationPartResult = { params?: RouteParams; nextLocation: RouterLocation }\nexport type LocationNoMatch = null\nexport type MatcherResult = LocationFullMatch | LocationPartResult | LocationNoMatch\n\nexport function matchLocation(route: RouteSchema, location: RouterLocation, context: MatcherContext): MatcherResult {\n  switch (route.type) {\n    case 'static': {\n      const routeExpectsExactMatch = route.path.endsWith('$')\n      const routePath = routeExpectsExactMatch ? route.path.slice(0, -1) : route.path\n\n      // [routePath=/path$] === \"/path\"\n      if (routeExpectsExactMatch && routePath === location.pathname) {\n        return {\n          nextLocation: null,\n        }\n      }\n      if (location.pathname.startsWith(routePath)) {\n        const hasNested = Array.isArray(route.routes) && route.routes.length > 0\n\n        // case 1: [routePath=/path$]/nested-path\n        const case1 = routeExpectsExactMatch && hasNested && location.pathname[routePath.length] === '/'\n\n        // case 2: [routePath=/path]-some/other-path\n        const case2 = !routeExpectsExactMatch && hasNested\n\n        if (case1 || case2) {\n          return {\n            nextLocation: {\n              ...location,\n              pathname: location.pathname.slice(routePath.length),\n            },\n          }\n        }\n      }\n      return null\n    }\n    case 'dynamic': {\n      return route.pathMatcher(location, context)\n    }\n    case 'fallback': {\n      return {\n        nextLocation: null,\n      }\n    }\n    default: {\n      throw new Error(`Unknown route schema:\\n${JSON.stringify(route, null, 4)}`)\n    }\n  }\n}\n","import * as React from 'react'\nimport { Saga } from 'redux-saga'\nimport invariant from 'invariant'\n\nimport { stateGetter } from '../store'\nimport { RouterLocation, RoutePath, RouteParams, Match } from '..'\nimport { MatcherResult, MatcherContext, matchLocation } from './matcher'\n\nexport interface BuildUrlContext {\n  getState: stateGetter\n}\n\nexport interface OptionalNestedRoutes {\n  routes?: RouteSchema[]\n}\n\nexport interface NestedRoutes {\n  routes: RouteSchema[]\n}\n\nexport interface BaseRouteSchema {\n  id: string\n  component?: React.ElementType,\n  onEnter?: Saga\n}\n\nexport interface StaticRouteSchema extends BaseRouteSchema, OptionalNestedRoutes {\n  type: 'static'\n  path: string\n}\n\nexport interface DynamicRouteSchema extends BaseRouteSchema, OptionalNestedRoutes {\n  type: 'dynamic'\n  pathMatcher: (location: RouterLocation, context: MatcherContext) => MatcherResult\n  buildUrl: (params: RouteParams, context: BuildUrlContext) => string\n}\n\nexport interface FallbackRouteSchema {\n  id: string\n  type: 'fallback'\n  component?: React.ElementType,\n}\n\nexport type RouteSchema = StaticRouteSchema | DynamicRouteSchema | FallbackRouteSchema\n\nexport type RouteSchemaSchemaWithNested = RouteSchema & NestedRoutes\n\nexport interface IRoutesCollection {\n  getRouteSchemas(path: RoutePath): IterableIterator<RouteSchema>\n\n  getMatch(location: RouterLocation, getState: stateGetter): Match\n\n  getFallbackMatch(path?: RoutePath): Match\n\n  isFallbackPath(path: RoutePath): boolean\n\n  buildUrl(path: RoutePath, params: RouteParams, getState: stateGetter): string\n\n  getRouteSchemaById(routeId: string): RouteSchema\n\n  hasRoute(routeId: string): boolean\n\n  getRouteNestedCollection(routeId: string): RoutesCollection\n\n  routeSchemaHasNested(routeId: string): boolean\n}\n\nfunction extendMatch(match: Match, routeId: string, params?: RouteParams): Match {\n  return {\n    path: [...match.path, routeId],\n    params: {\n      ...match.params,\n      ...(params ? params : {}),\n    },\n  }\n}\n\nfunction extendMatcherContext(context: MatcherContext, routeId: string, params?: RouteParams): MatcherContext {\n  return {\n    ...context,\n    match: extendMatch(context.match, routeId, params),\n  }\n}\n\nconst routeHasNested = (routeSchema: RouteSchema): boolean => {\n  return 'routes' in routeSchema && Array.isArray(routeSchema.routes) && routeSchema.routes.length > 0\n}\n\nexport class RoutesCollection implements IRoutesCollection {\n  protected readonly routesMap: Map<string, RouteSchema>\n  protected readonly nestedMap: Map<string, RoutesCollection>\n  protected readonly parentCollection: RoutesCollection | void\n  protected readonly parentRouteSchema: RouteSchema | void\n  protected readonly fallbackId: string | null\n\n  constructor(routeSchemas: RouteSchema[], parentCollection?: RoutesCollection, parentRouteSchema?: RouteSchema) {\n    this.parentCollection = parentCollection\n    this.parentRouteSchema = parentRouteSchema\n\n    this.fallbackId = null\n\n    this.routesMap = new Map()\n    for (const route of routeSchemas) {\n      if (route.type === 'fallback') {\n        if (process.env.NODE_ENV !== 'production') {\n          invariant(this.fallbackId === null, 'You can specify only one fallback route')\n        }\n        this.fallbackId = route.id\n      }\n      this.routesMap.set(route.id, Object.freeze(route))\n    }\n\n    this.nestedMap = new Map()\n    if (this.parentCollection == null) {\n      invariant(this.fallbackId, 'You must specify root fallback route')\n    }\n  }\n\n  hasRoute(routeId: string): boolean {\n    return this.routesMap.has(routeId)\n  }\n\n  getRouteSchemaById(routeId: string): RouteSchema {\n    const routeSchema = this.routesMap.get(routeId)\n    if (!routeSchema) {\n      throw new Error(`Route ${routeId} is not found, `\n                        + `available routes: ${Array.from(this.routesMap.keys()).join(', ')}`)\n    }\n    return routeSchema as RouteSchema\n  }\n\n  routeSchemaHasNested(routeId: string): boolean {\n    const routeSchema = this.getRouteSchemaById(routeId)\n    return routeHasNested(routeSchema)\n  }\n\n  getRouteNestedCollection(routeId: string): RoutesCollection {\n    if (this.nestedMap.has(routeId)) {\n      return this.nestedMap.get(routeId) as RoutesCollection\n    }\n    const routeSchema = this.getRouteSchemaById(routeId)\n    if (!routeHasNested(routeSchema)) {\n      throw new Error(`Route ${routeId} hasn't nested`)\n    }\n    const nestedRoutesSchemas = (routeSchema as RouteSchemaSchemaWithNested).routes\n    const collection = new RoutesCollection(nestedRoutesSchemas, this, routeSchema)\n    this.nestedMap.set(routeId, collection)\n    return collection\n  }\n\n  private traverse(location: RouterLocation, context: MatcherContext): Match | null {\n    for (const route of this.routesMap.values()) {\n      const matcherResult = matchLocation(route, location, context)\n\n      if (matcherResult !== null) {\n        // is not exact match and has nested\n        if (matcherResult.nextLocation && routeHasNested(route)) {\n          const nestedRoutesCollection = this.getRouteNestedCollection(route.id)\n          const res = nestedRoutesCollection.traverse(\n            matcherResult.nextLocation as RouterLocation,\n            extendMatcherContext(context, route.id, matcherResult.params),\n          )\n          if (res !== null) {\n            return res\n          }\n        } else {\n          return extendMatch(context.match, route.id, matcherResult.params)\n        }\n      }\n    }\n    if (this.fallbackId !== null) {\n      return extendMatch(context.match, this.fallbackId)\n    }\n    return null\n  }\n\n  getMatch(location: RouterLocation, getState: stateGetter): Match {\n    const res = this.traverse(location, { getState, match: { path: [], params: {} } })\n    if (res === null) {\n      throw new Error('Route is not found. Did you forget to specify fallback route?')\n    }\n    return res\n  }\n\n  getRouteSchemas(path: RoutePath): IterableIterator<RouteSchema> {\n    let collection = this as RoutesCollection\n    let ind = 0\n    return {\n      next() {\n        if (ind < path.length) {\n          if (!collection) {\n            throw new Error(`Route ${path[ind]} is not found`)\n          }\n          const route = collection.getRouteSchemaById(path[ind])\n          const res = { done: false, value: route }\n          if (routeHasNested(route)) {\n            collection = collection.getRouteNestedCollection(path[ind])\n          } else {\n            // @ts-ignore\n            collection = null as RoutesCollection\n          }\n          ind += 1\n          return res\n        }\n        // @ts-ignore\n        return { done: true, value: null as RouteSchema }\n      },\n      [Symbol.iterator]() {\n        return this\n      },\n    }\n  }\n\n  private getRouteFullPath(routeId: string): RoutePath {\n    let parentCollection = this.parentCollection\n    let parentRouteSchema = this.parentRouteSchema\n    const path = [routeId]\n    while (parentCollection && parentRouteSchema) {\n      path.push(parentRouteSchema.id)\n      parentRouteSchema = (parentCollection as RoutesCollection).parentRouteSchema\n      parentCollection = (parentCollection as RoutesCollection).parentCollection\n    }\n    path.reverse()\n    return path\n  }\n\n  getFallbackMatch(path?: RoutePath): Match {\n    if (Array.isArray(path) && path.length > 1) {\n      // go into deep to find the most nest collection\n      let nestedCollection = this as RoutesCollection\n      for (let ind = 0; ind < path.length - 1; ind += 1) {\n\n        if (!nestedCollection.routeSchemaHasNested(path[ind])) {\n          break\n        }\n        nestedCollection = nestedCollection.getRouteNestedCollection(path[ind])\n      }\n\n      // go upper, return the first fallback route\n      while (nestedCollection) {\n        if (nestedCollection.fallbackId !== null) {\n          return {\n            path: nestedCollection.getRouteFullPath(nestedCollection.fallbackId),\n            params: {},\n          }\n        }\n        nestedCollection = nestedCollection.parentCollection as RoutesCollection\n      }\n    }\n    if (this.fallbackId === null) {\n      throw new Error('You must specify at least one fallback route')\n    }\n    return { path: [this.fallbackId], params: {} }\n  }\n\n  isFallbackPath(path: RoutePath): boolean {\n    const routes = Array.from(this.getRouteSchemas(path))\n    return routes[routes.length - 1].type === 'fallback'\n  }\n\n  buildUrl(path: RoutePath, params: RouteParams, getState: stateGetter): string {\n    let url = ''\n    const routeId = path[0]\n    const route = this.getRouteSchemaById(routeId)\n\n    switch (route.type) {\n      case 'static': {\n        url = route.path.endsWith('$') ? route.path.slice(0, -1) : route.path\n        break\n      }\n      case 'dynamic': {\n        url = route.buildUrl(params, { getState })\n        break\n      }\n    }\n\n    if (path.length > 1) {\n      const nestedCollection = this.getRouteNestedCollection(routeId)\n      url = `${url}${nestedCollection.buildUrl(path.slice(1), params, getState)}`\n    }\n\n    if (url.startsWith('//')) {\n      url = url.slice(1)\n    }\n\n    return url\n  }\n}\n","import { RouterLocation } from '..'\n\nexport * from './routes'\nexport * from './matcher'\n\nexport const urlToRouterLocation = (url: string): RouterLocation => {\n  if (url) {\n    const [pathname, ...rest] = url.split('?')\n    const search = rest.length > 0 ? `?${rest.join('?')}` : ''\n    return { pathname, search }\n  }\n  return { pathname: '', search: '' }\n}\n\nexport const locationToUrl = (location: RouterLocation): string =>\n  `${location.pathname}${location.search}`\n\nexport const isNotTheSameLocations = (\n  { pathname: pathname1 = '', search: search1 = '' } : RouterLocation = { pathname: '', search: '' },\n  { pathname: pathname2 = '', search: search2 = '' } : RouterLocation = { pathname: '', search: '' },\n  ): boolean => pathname1 !== pathname2 || search1 !== search2\n","import { Saga, Task, SagaIterator } from 'redux-saga'\nimport { fork, call, cancel, put, select } from 'redux-saga/effects'\n\nimport { IRoutesCollection } from '../../utils'\nimport { setMatch } from '../actions'\nimport { getMatch } from '../selectors'\nimport { Match } from '../../.'\n\nexport type ApplyMatchSaga = ({ match }: { match: Match }) => SagaIterator\n\nexport default ({ routes, ssr }: { ssr: boolean; routes: IRoutesCollection }): ApplyMatchSaga => {\n  const runTasks: Task[] = []\n  return function* applyMatch({ match }) {\n    const prevMatch = yield select(getMatch)\n    yield cancel(runTasks)\n    runTasks.splice(0)\n    yield put(setMatch(match))\n    for (const routeSchema of routes.getRouteSchemas(match.path)) {\n      if ('onEnter' in routeSchema) {\n        const onEnter = routeSchema.onEnter as Saga\n        if (ssr) {\n          yield call(onEnter, { ssr, prevMatch })\n        } else {\n          runTasks.push(yield fork(onEnter, { ssr, prevMatch }))\n        }\n      }\n    }\n  }\n}\n","import { SagaIterator } from 'redux-saga'\nimport { call, take, takeLatest, select, race, put } from 'redux-saga/effects'\nimport { getType, ActionType } from 'typesafe-actions'\n\nimport history, { RouterHistory } from '../../history'\nimport { goTo, notFound, setServerResponse, setLocation, goBack } from '../actions'\nimport { getMatch, getLocation, getParams } from '../selectors'\nimport { RootStore, stateGetter } from '../reducer'\nimport { RouterLocation, Match } from '../../.'\nimport { isNotTheSameLocations, urlToRouterLocation, locationToUrl, IRoutesCollection } from '../../utils'\n\nimport createApplyMatch, { ApplyMatchSaga } from './createApplyMatch'\n\ntype RoutesParam = { routes: IRoutesCollection }\ntype ApplyMatchParam = { applyMatch: ApplyMatchSaga }\ntype GetStateParam = { getState: stateGetter }\n\nconst getUrlFromGoToAction = (\n  { routes, getState }: RoutesParam & GetStateParam,\n  action: ActionType<typeof goTo>,\n): string => {\n  return 'url' in action.payload\n    ? action.payload.url\n    : routes.buildUrl(action.payload.path, action.payload.params, getState)\n}\n\nfunction* setFallbackMatch({ routes, applyMatch }: RoutesParam & ApplyMatchParam) {\n  const match = yield select(getMatch)\n  const fallbackMatch = routes.getFallbackMatch(match.path)\n  yield call(applyMatch, { match: fallbackMatch })\n}\n\nfunction* handleNotFound(\n  { routes, applyMatch }: RoutesParam & ApplyMatchParam,\n  action: ActionType<typeof notFound>,\n) {\n  yield call(setFallbackMatch, { routes, applyMatch })\n}\n\nfunction handleGoBack() {\n  if (history !== null) {\n    (history as RouterHistory).back()\n  }\n}\n\nfunction* handleGoTo(\n  { routes, applyMatch, getState }: RoutesParam & ApplyMatchParam & GetStateParam,\n  action: ActionType<typeof goTo>,\n) {\n  const nextLocation = urlToRouterLocation(getUrlFromGoToAction({ routes, getState }, action))\n\n  let match\n  if ('url' in action.payload) {\n    match = routes.getMatch(nextLocation, getState)\n  } else {\n    match = { path: action.payload.path, params: action.payload.params }\n  }\n\n  yield put(setLocation(nextLocation))\n\n  if (history !== null) {\n    if (isNotTheSameLocations((history as RouterHistory).location, nextLocation)) {\n      if (action.payload.replace) {\n        (history as RouterHistory).replace(locationToUrl(nextLocation))\n      } else {\n        (history as RouterHistory).push(locationToUrl(nextLocation))\n      }\n    }\n  }\n\n  yield call(applyMatch, { match })\n}\n\nexport default function createRouterSaga(\n  { routes, serverLocation, store }: RoutesParam & { serverLocation?: RouterLocation, store: RootStore}) {\n  const ssr = Boolean(serverLocation)\n  const applyMatch = createApplyMatch({ routes, ssr })\n\n  if (history) {\n    history.listen(location => {\n      const currentLocation = getLocation(store.getState())\n      if (!currentLocation || isNotTheSameLocations(location, currentLocation)) {\n        const match = routes.getMatch(location, store.getState)\n        store.dispatch(goTo(match))\n      }\n    })\n  }\n\n  return function* routerSaga(): SagaIterator {\n    let startLocation = serverLocation\n    if (!startLocation) {\n      if (typeof window === 'object' && window.location) {\n        startLocation = {\n          pathname: window.location.pathname,\n          search: window.location.search,\n        }\n      } else {\n        throw new Error('You must provide serverLocation')\n      }\n    }\n\n    if (ssr) {\n      yield put(setLocation(startLocation))\n      const match = routes.getMatch(startLocation, store.getState)\n      const { notFoundAction, goToAction } = yield race({\n        _: call(applyMatch, { match }),\n        notFoundAction: take(getType(notFound)),\n        goToAction: take(getType(goTo)),\n      })\n\n      if (notFoundAction) {\n        yield put(setServerResponse({ status: 404 }))\n        yield call(setFallbackMatch, { routes, applyMatch })\n      } else if (goToAction) {\n        const location = getUrlFromGoToAction(\n          { routes, getState: store.getState },\n          goToAction as ActionType<typeof goTo>,\n        )\n        yield put(setServerResponse({\n          location,\n          status: goToAction.payload.replace ? 301 : 302,\n        }))\n      } else if (routes.isFallbackPath(match.path)) {\n        yield put(setServerResponse({ status: 404 }))\n      } else {\n        yield put(setServerResponse({ status: 200 }))\n      }\n      return\n    }\n\n    const params = { routes, applyMatch, getState: store.getState }\n\n    yield takeLatest(getType(notFound), handleNotFound, params)\n    yield takeLatest(getType(goTo), handleGoTo, params)\n    yield takeLatest(getType(goBack), handleGoBack)\n\n    const currentMatch = yield select(getMatch)\n    if (currentMatch.path.length === 0) {\n      const match = routes.getMatch(startLocation, store.getState)\n      yield put(goTo({ path: match.path, params: match.params }))\n    } else {\n      yield call(applyMatch, { match: currentMatch })\n    }\n  }\n}\n","import React from 'react'\n\nimport { RouteContext, RouteContextValues } from './contexts'\nimport { IRoutesCollection, RouteSchema } from '../utils'\n\ninterface RoutesProps {\n  routes: IRoutesCollection\n}\n\ninterface RouteContextProps {\n  path: string[]\n}\n\nconst Routes = ({ routes, path }: RoutesProps & RouteContextProps) => {\n  if (routes && path.length > 0 && routes.hasRoute(path[0])) {\n    const routeSchema = routes.getRouteSchemaById(path[0])\n    const nestRoutes = routes.routeSchemaHasNested(path[0]) ? routes.getRouteNestedCollection(path[0]) : null\n    const Component = routeSchema.component as React.ElementType\n    if (Component) {\n      return (\n        <RouteContext.Provider value={{ path: path.slice(1) }}>\n          <Component routes={nestRoutes}/>\n        </RouteContext.Provider>\n      )\n    }\n    if (nestRoutes) {\n      return (\n        <RouteContext.Provider value={{ path: path.slice(1) }}>\n          <Routes routes={nestRoutes} path={path.slice(1)}/>\n        </RouteContext.Provider>\n      )\n    }\n\n  }\n  return null\n}\n\nexport default (props: RoutesProps) => (\n  <RouteContext.Consumer>\n    {({ path }: RouteContextValues) => <Routes {...props} path={path}/>}\n  </RouteContext.Consumer>\n)\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport invariant from 'invariant'\n\nimport { RouterProviderContext, RouteContext } from './contexts'\nimport { stateGetter, RootState, getMatch } from '../store'\nimport { IRoutesCollection } from '../utils'\nimport { RouteParams, RoutePath, Match } from '../.'\nimport Routes from './Routes'\n\nexport interface RouterProviderProps {\n  routes: IRoutesCollection\n  match: Match\n  getState: stateGetter\n}\n\nexport class RouterProvider extends React.Component<RouterProviderProps> {\n  buildUrl = (to: RoutePath, params: RouteParams): string => {\n    return this.props.routes.buildUrl(to, params, this.props.getState)\n  }\n\n  render() {\n    const { match, routes, children } = this.props\n    if (match && match.path.length > 0) {\n      return (\n        <RouterProviderContext.Provider value={{ buildUrl: this.buildUrl }}>\n          <RouteContext.Provider value={{ path: match.path }}>\n            {children ? children : <Routes routes={routes} />}\n          </RouteContext.Provider>\n        </RouterProviderContext.Provider>\n      )\n    }\n    return null\n  }\n}\n\nconst stateToProps = (state: RootState) => {\n  invariant(state.router, 'Router state is not found. You must attach it under \"router\" key.')\n  return {\n    match: getMatch(state),\n    getState: () => state,\n  }\n}\nexport const ConnectedRouterProvider = connect(stateToProps)(RouterProvider)\n\nexport default ConnectedRouterProvider\n","import React from 'react'\nimport invariant from 'invariant'\n\nimport { RouterProviderContextValues, RouterProviderContext } from './contexts'\nimport history from '../history'\nimport { RouteParams, RoutePath } from '../'\n\ntype propsTo = RoutePath | string\n\ninterface LinkProps {\n  to: propsTo\n  params?: RouteParams\n  target?: string\n  replace?: boolean\n  className?: string\n  style?: {}\n}\n\ninterface LinkPropsWithBuildUrl extends LinkProps {\n  buildUrl: (to: RoutePath, params: RouteParams) => string\n}\n\ninterface LinkState {\n  to: RoutePath\n  params: RouteParams\n  href: string\n  propsTo: propsTo\n  propsParams?: RouteParams\n}\n\nconst isModifiedEvent = (event: React.MouseEvent<HTMLAnchorElement>): boolean =>\n  Boolean(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey)\n\nclass Link extends React.PureComponent<LinkPropsWithBuildUrl, LinkState> {\n  static defaultProps = {\n    replace: false,\n  }\n\n  static getDerivedStateFromProps(nextProps: LinkPropsWithBuildUrl, prevState: LinkState): LinkState | null {\n    invariant(nextProps.to, 'You must specify the \"to\" property')\n\n    if (prevState.propsTo !== nextProps.to || prevState.propsParams !== nextProps.params) {\n      const to = Array.isArray(nextProps.to) ? nextProps.to : nextProps.to.split('.')\n      const params = nextProps.params || {}\n      return {\n        to,\n        params,\n        propsTo: nextProps.to,\n        propsParams: nextProps.params,\n        href: nextProps.buildUrl(to, params),\n      }\n    }\n\n    return null\n  }\n\n  readonly state: LinkState = {} as LinkState\n\n  onClick = (event: React.MouseEvent<HTMLAnchorElement>): void => {\n    if (\n      !event.defaultPrevented && // onClick prevented default\n      event.button === 0 && // ignore everything but left clicks\n      !this.props.target && // let browser handle \"target=_blank\" etc.\n      !isModifiedEvent(event) // ignore clicks with modifier keys\n    ) {\n      event.preventDefault()\n      if (history) {\n        if (Boolean(this.props.replace)) {\n          history.replace(this.state.href)\n        } else {\n          history.push(this.state.href)\n        }\n      }\n    }\n  }\n\n  render() {\n    const { className, children, style } = this.props\n    const { href } = this.state\n    return (\n      <a href={href} onClick={this.onClick} className={className} style={style}>\n        {children}\n      </a>\n    )\n  }\n}\n\nconst LinkWithBuildUrl: React.FunctionComponent<LinkProps> = props => {\n  return (\n    <RouterProviderContext.Consumer>\n      {({ buildUrl }: RouterProviderContextValues) => {\n        return <Link {...props} buildUrl={buildUrl} />\n      }}\n    </RouterProviderContext.Consumer>\n  )\n}\n\nexport default LinkWithBuildUrl\n"],"names":["action","actions.setMatch","actions.setServerResponse","actions.setLocation","isProduction","invariant","warning","select","cancel","put","call","fork","history","race","take","takeLatest","Routes","connect"],"mappings":"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"}